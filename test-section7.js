// Test Section 7: Documentation - Questions 1-50

// Define the questions for Section 7 - Group 1
const section7QuestionsGroup1 = [
    {
        id: 1,
        question: "What is the primary purpose of documentation in Early Intervention?",
        options: [
            "To create paperwork for administrative records",
            "To provide a record of services and progress for accountability, communication, and quality assurance",
            "To justify payment for services rendered",
            "To fulfill legal requirements without practical benefit"
        ],
        correctIndex: 1,
        explanation: "The primary purpose of documentation in Early Intervention is to provide a record of services and progress for accountability, communication, and quality assurance. Documentation creates a written history of the child's journey through Early Intervention, facilitates communication among team members, and helps ensure quality services."
    },
    {
        id: 2,
        question: "Which of the following should be included in session notes for Early Intervention services?",
        options: [
            "Only a description of activities performed during the session",
            "Only the child's response to intervention",
            "Date, duration, setting, activities, child's response, and family involvement",
            "Only information about missed appointments"
        ],
        correctIndex: 2,
        explanation: "Session notes should include the date, duration, setting, activities performed during the session, the child's response to intervention, and family involvement. This comprehensive documentation provides a clear picture of what occurred during the session and the child's progress."
    },
    {
        id: 3,
        question: "How should progress toward IFSP outcomes be documented?",
        options: [
            "Using medical terminology to ensure precision",
            "Using objective, measurable terms related to the functional outcomes",
            "Using subjective opinions about the child's effort",
            "Only noting when outcomes are fully achieved"
        ],
        correctIndex: 1,
        explanation: "Progress toward IFSP outcomes should be documented using objective, measurable terms related to the functional outcomes. This includes specific data on the child's performance, quantifiable measures of progress, and clear descriptions of what the child can and cannot yet do related to the outcome."
    },
    {
        id: 4,
        question: "Which confidentiality law specifically protects educational records for children receiving Early Intervention services?",
        options: [
            "HIPAA (Health Insurance Portability and Accountability Act)",
            "FERPA (Family Educational Rights and Privacy Act)",
            "IDEA Part C (Individuals with Disabilities Education Act)",
            "ADA (Americans with Disabilities Act)"
        ],
        correctIndex: 2,
        explanation: "IDEA Part C (Individuals with Disabilities Education Act) specifically protects the confidentiality of educational records for children receiving Early Intervention services. Part C includes specific provisions regarding the confidentiality of Early Intervention records and parental rights to access those records."
    },
    {
        id: 5,
        question: "When sharing information from a child's Early Intervention records with individuals outside the Early Intervention program, what is required?",
        options: [
            "Approval from the service coordinator",
            "Signed parental consent specifying what information can be shared and with whom",
            "A court order",
            "Verification that the information is being used for educational purposes"
        ],
        correctIndex: 1,
        explanation: "Sharing information from a child's Early Intervention records with individuals outside the program requires signed parental consent specifying what information can be shared and with whom. This consent should be in writing and maintained in the child's record."
    },
    {
        id: 6,
        question: "Which documentation best demonstrates family-centered practice in Early Intervention?",
        options: [
            "Notes that focus only on the child's developmental progress",
            "Reports written using technical jargon to impress families",
            "Documentation that includes family input, priorities, and participation in services",
            "Records that minimize the involvement of family members"
        ],
        correctIndex: 2,
        explanation: "Documentation that includes family input, priorities, and participation in services best demonstrates family-centered practice in Early Intervention. This shows respect for the family's role as the primary decision-maker and partner in the intervention process."
    },
    {
        id: 7,
        question: "What is the most appropriate timeframe for completing session documentation?",
        options: [
            "Within 24 hours of the session",
            "At the end of each month",
            "Immediately before the next IFSP review",
            "Whenever there is administrative oversight"
        ],
        correctIndex: 0,
        explanation: "The most appropriate timeframe for completing session documentation is within 24 hours of the session. Timely documentation ensures accuracy, as details are still fresh in the provider's mind, and facilitates communication among team members."
    },
    {
        id: 8,
        question: "Which of the following is a characteristic of high-quality Early Intervention documentation?",
        options: [
            "Use of subjective language and personal opinions",
            "Focus solely on the child's deficits and challenges",
            "Clear, objective, jargon-free language that parents can understand",
            "Minimal detail to save time"
        ],
        correctIndex: 2,
        explanation: "High-quality Early Intervention documentation uses clear, objective, jargon-free language that parents can understand. It should be specific, factual, and accessible to all team members, including the family."
    },
    {
        id: 9,
        question: "What is the purpose of documenting family cancellations or no-shows for scheduled Early Intervention sessions?",
        options: [
            "To penalize families for missed sessions",
            "To track patterns that may indicate barriers to service delivery and address them",
            "To justify reducing services in the IFSP",
            "To fulfill a legal requirement with no practical purpose"
        ],
        correctIndex: 1,
        explanation: "Documenting family cancellations or no-shows helps track patterns that may indicate barriers to service delivery so they can be addressed. This information can help identify challenges the family may be facing in accessing services and prompt a discussion about how to overcome these barriers."
    },
    {
        id: 10,
        question: "How long must Early Intervention records be maintained after a child exits the program?",
        options: [
            "1 year",
            "3 years",
            "5 years",
            "7 years"
        ],
        correctIndex: 2,
        explanation: "Early Intervention records must typically be maintained for at least 5 years after a child exits the program, though specific requirements may vary by state. This ensures that records are available for future reference, audits, or if the child re-enters services."
    }
];

// Define Section 7 Questions - Group 2
const section7QuestionsGroup2 = [
    {
        id: 11,
        question: "What should be documented during the initial assessment process?",
        options: [
            "Only the child's developmental scores on standardized tests",
            "Only the family's income and insurance information",
            "Child's strengths and needs, family concerns and priorities, assessment methods and results",
            "Only negative findings that indicate delays"
        ],
        correctIndex: 2,
        explanation: "During the initial assessment process, documentation should include the child's strengths and needs, family concerns and priorities, assessment methods and results. This comprehensive approach ensures a holistic view of the child within their family context."
    },
    {
        id: 12,
        question: "Which documentation format best supports coordination among team members?",
        options: [
            "Separate and independent documentation by each provider",
            "Integrated documentation accessible to all team members that shows collaborative planning",
            "Documentation that minimizes redundancy by having only one provider record information",
            "Documentation that focuses only on medical diagnoses"
        ],
        correctIndex: 1,
        explanation: "Integrated documentation accessible to all team members that shows collaborative planning best supports coordination. This approach allows each provider to see other team members' observations and interventions, supporting a unified approach to meeting the child's needs."
    },
    {
        id: 13,
        question: "What is the purpose of documenting attempts to contact families?",
        options: [
            "To track service coordinator productivity",
            "To demonstrate due diligence in outreach efforts and identify barriers to engagement",
            "To provide evidence for terminating services",
            "To satisfy administrative requirements only"
        ],
        correctIndex: 1,
        explanation: "Documenting attempts to contact families demonstrates due diligence in outreach efforts and helps identify barriers to engagement. This documentation shows good faith efforts to involve families and can help identify patterns that suggest the need for different engagement strategies."
    },
    {
        id: 14,
        question: "What should be included in documentation related to a child's transition out of Early Intervention?",
        options: [
            "Only the exit date",
            "Only which program the child is transitioning to",
            "Transition planning meetings, family preferences, information shared with receiving programs, and steps taken to prepare the child and family",
            "Only whether the child met all IFSP outcomes"
        ],
        correctIndex: 2,
        explanation: "Documentation related to transition should include transition planning meetings, family preferences, information shared with receiving programs, and steps taken to prepare the child and family. This comprehensive approach ensures a smooth transition process."
    },
    {
        id: 15,
        question: "Under IDEA Part C, who has the right to inspect and review Early Intervention records?",
        options: [
            "Only the service coordinator",
            "Parents or legal guardians of the child",
            "Any professional who requests access",
            "Only state-level administrators"
        ],
        correctIndex: 1,
        explanation: "Under IDEA Part C, parents or legal guardians of the child have the right to inspect and review Early Intervention records. This right includes examining records, requesting explanations, and obtaining copies."
    },
    {
        id: 16,
        question: "If parents believe information in their child's Early Intervention record is inaccurate, what right do they have?",
        options: [
            "No rights to challenge information once it is recorded",
            "Right to request amendments to the record and receive a hearing if amendments are denied",
            "Right to remove the entire record from the system",
            "Right to sue the Early Intervention program for defamation"
        ],
        correctIndex: 1,
        explanation: "Parents have the right to request amendments to their child's record if they believe information is inaccurate. If amendments are denied, parents have the right to a hearing to challenge the decision. This ensures records are accurate and fair."
    },
    {
        id: 17,
        question: "What is the most appropriate timeframe for completing session documentation?",
        options: [
            "Within 24 hours of the session",
            "At the end of each month",
            "Immediately before the next IFSP review",
            "Whenever there is administrative oversight"
        ],
        correctIndex: 0,
        explanation: "The most appropriate timeframe for completing session documentation is within 24 hours of the session. Timely documentation ensures accuracy, as details are still fresh in the provider's mind, and facilitates communication among team members."
    },
    {
        id: 18,
        question: "How should changes to the IFSP be documented?",
        options: [
            "Informally through verbal agreements only",
            "By creating a completely new IFSP document for any change",
            "Through written amendments that are signed by parents and attached to the original IFSP",
            "By having service providers make changes directly without parental involvement"
        ],
        correctIndex: 2,
        explanation: "Changes to the IFSP should be documented through written amendments that are signed by parents and attached to the original IFSP. This ensures transparent record-keeping and confirms parental consent to the changes."
    },
    {
        id: 19,
        question: "Which of the following statements about electronic documentation in Early Intervention is most accurate?",
        options: [
            "Electronic records are not secure and should never be used",
            "Electronic systems must include appropriate security measures to protect confidentiality",
            "Electronic documentation eliminates the need for parental consent to share information",
            "Electronic records cannot be used for official documentation purposes"
        ],
        correctIndex: 1,
        explanation: "Electronic systems used for Early Intervention records must include appropriate security measures to protect confidentiality. This includes password protection, encryption, and other safeguards to prevent unauthorized access."
    },
    {
        id: 20,
        question: "What information should be included in documentation of team meetings about a child in Early Intervention?",
        options: [
            "Only decisions made, without recording the discussion process",
            "Only who attended, without details of what was discussed",
            "Date, participants, discussion points, decisions made, and follow-up responsibilities",
            "Only disagreements among team members"
        ],
        correctIndex: 2,
        explanation: "Documentation of team meetings should include the date, participants, discussion points, decisions made, and follow-up responsibilities. This comprehensive approach ensures accountability and clear communication among team members."
    },
    {
        id: 21,
        question: "How should documentation address a family's cultural and linguistic background?",
        options: [
            "It should avoid mentioning cultural factors to prevent discrimination",
            "It should only note language barriers that impact services",
            "It should respect and accurately reflect cultural perspectives, language preferences, and use of interpreters when applicable",
            "It should focus on assimilating the family to mainstream practices"
        ],
        correctIndex: 2,
        explanation: "Documentation should respect and accurately reflect cultural perspectives, language preferences, and use of interpreters when applicable. This approach honors family diversity and ensures culturally responsive services."
    },
    {
        id: 22,
        question: "What is a key component of documenting a child's progress over time?",
        options: [
            "Focusing only on areas where the child is struggling",
            "Using the same assessment tool regardless of the child's changing needs",
            "Including objective measures and observations that can be compared across time periods",
            "Minimizing family input to ensure professional objectivity"
        ],
        correctIndex: 2,
        explanation: "A key component of documenting a child's progress over time is including objective measures and observations that can be compared across time periods. This creates a clear picture of development and response to interventions."
    },
    {
        id: 23,
        question: "What information about a family's insurance should be documented in Early Intervention records?",
        options: [
            "No insurance information should ever be documented",
            "Only whether the family has private insurance",
            "Insurance status, consent for billing, and any impact on family cost participation according to program policies",
            "Complete details of all family financial accounts"
        ],
        correctIndex: 2,
        explanation: "Documentation about a family's insurance should include insurance status, consent for billing, and any impact on family cost participation according to program policies. This ensures appropriate billing practices while respecting family privacy."
    },
    {
        id: 24,
        question: "When documenting suspected child abuse or neglect, what is the most appropriate approach?",
        options: [
            "Avoid documentation to protect family privacy",
            "Include subjective judgments about family character",
            "Document objective observations and actions taken in accordance with mandatory reporting laws",
            "Wait for confirmation before documenting any concerns"
        ],
        correctIndex: 2,
        explanation: "When documenting suspected child abuse or neglect, the most appropriate approach is to document objective observations and actions taken in accordance with mandatory reporting laws. This includes factual descriptions without speculation or judgment."
    },
    {
        id: 25,
        question: "What is the best practice for documenting environmental factors that impact a child's development?",
        options: [
            "Avoid mentioning environmental factors as they may be sensitive",
            "Focus only on negative environmental factors that need to be addressed",
            "Document both supportive environmental elements and challenges in objective, non-judgmental terms",
            "Only document environmental factors if they require formal intervention"
        ],
        correctIndex: 2,
        explanation: "Best practice for documenting environmental factors is to document both supportive elements and challenges in objective, non-judgmental terms. This creates a complete picture of the child's context while respecting the family."
    }
];

// Define Section 7 Questions - Group 3
const section7QuestionsGroup3 = [
    {
        id: 31,
        question: "What type of documentation provides evidence of a child's progress toward IFSP outcomes?",
        options: [
            "Only standardized assessment results",
            "Only parent reports of progress",
            "A combination of ongoing data collection, observations, work samples, and parent reports",
            "Only provider notes from therapy sessions"
        ],
        correctIndex: 2,
        explanation: "Evidence of a child's progress toward IFSP outcomes is best documented through a combination of ongoing data collection, observations, work samples, and parent reports. This multi-faceted approach provides a comprehensive picture of the child's development across settings."
    },
    {
        id: 32,
        question: "What is a key principle to follow when documenting services that were missed or canceled?",
        options: [
            "Only document missed services if they exceed a certain number",
            "Blame the family for all missed services",
            "Document objectively without blame, including the reason and any plans for make-up sessions",
            "Avoid documenting missed services to maintain a positive record"
        ],
        correctIndex: 2,
        explanation: "When documenting missed or canceled services, providers should document objectively without blame, including the reason and any plans for make-up sessions. This factual approach maintains respectful relationships while ensuring accurate service records."
    },
    {
        id: 33,
        question: "What information should be included in documentation of a child's discharge from Early Intervention?",
        options: [
            "Only the date of discharge",
            "Only whether outcomes were achieved",
            "Reason for discharge, summary of progress, recommendations for continued support, and family's input on the discharge process",
            "Only information about the next placement"
        ],
        correctIndex: 2,
        explanation: "Discharge documentation should include the reason for discharge, summary of progress, recommendations for continued support, and the family's input on the discharge process. This comprehensive approach ensures continuity of care and acknowledges the family's role."
    },
    {
        id: 34,
        question: "How should conflicting opinions among team members be documented in Early Intervention records?",
        options: [
            "They should not be documented to present a unified approach",
            "Only the majority opinion should be documented",
            "Different perspectives should be documented objectively, along with how the team reached decisions",
            "Each professional should maintain separate records with their own opinion"
        ],
        correctIndex: 2,
        explanation: "Conflicting opinions among team members should be documented objectively, along with how the team reached decisions. This transparent approach respects professional perspectives while showing how consensus or compromise was achieved."
    },
    {
        id: 35,
        question: "What is the appropriate way to correct an error in Early Intervention documentation?",
        options: [
            "Erase or delete the incorrect information",
            "Use correction fluid to cover the error",
            "Draw a single line through the error, initial and date the correction, and enter the correct information",
            "Create an entirely new document to replace the one with errors"
        ],
        correctIndex: 2,
        explanation: "The appropriate way to correct an error in documentation is to draw a single line through the error, initial and date the correction, and enter the correct information. This maintains the integrity of the record while clearly showing what was changed and when."
    },
    {
        id: 36,
        question: "What is the primary purpose of documenting functional outcomes in the IFSP?",
        options: [
            "To satisfy administrative requirements",
            "To ensure payment for services",
            "To clearly state what the child and family will work toward and how progress will be measured",
            "To document the child's deficits"
        ],
        correctIndex: 2,
        explanation: "The primary purpose of documenting functional outcomes in the IFSP is to clearly state what the child and family will work toward and how progress will be measured. This provides direction for intervention and a means to evaluate effectiveness."
    },
    {
        id: 37,
        question: "How should documentation reflect the coaching model used in Early Intervention?",
        options: [
            "It should focus only on direct interventions provided to the child",
            "It should demonstrate how providers are building caregiver capacity through coaching, modeling, and practice",
            "It should minimize references to parent participation",
            "It should emphasize the provider's expertise over parent input"
        ],
        correctIndex: 1,
        explanation: "Documentation of the coaching model should demonstrate how providers are building caregiver capacity through coaching, modeling, and practice. This reflects the focus on empowering families to support their child's development between visits."
    },
    {
        id: 38,
        question: "What is a key consideration when documenting sensitive information about family circumstances?",
        options: [
            "Including personal judgments about the family situation",
            "Avoiding any mention of sensitive circumstances even if relevant to services",
            "Including only information relevant to service delivery, documented objectively and respectfully",
            "Using euphemisms instead of clear descriptions"
        ],
        correctIndex: 2,
        explanation: "When documenting sensitive family information, include only information relevant to service delivery, documented objectively and respectfully. This maintains family dignity while ensuring necessary context for providing appropriate services."
    },
    {
        id: 39,
        question: "What should be included in documentation of a screening that leads to a referral for comprehensive evaluation?",
        options: [
            "Only the screening scores",
            "Only the fact that a referral was made",
            "Screening tool used, results, specific concerns identified, discussion with family, and next steps",
            "Only the areas of concern without specific screening information"
        ],
        correctIndex: 2,
        explanation: "Documentation of a screening that leads to referral should include the screening tool used, results, specific concerns identified, discussion with family, and next steps. This provides a clear rationale for the referral and ensures appropriate follow-up."
    },
    {
        id: 40,
        question: "What is the importance of documenting a child's developmental history in Early Intervention records?",
        options: [
            "It is unnecessary if current assessments are available",
            "It provides context for understanding the child's development and identifying potential factors influencing progress",
            "It is only important for medical diagnoses",
            "It is only needed for children with significant delays"
        ],
        correctIndex: 1,
        explanation: "Documenting a child's developmental history provides context for understanding the child's development and identifying potential factors influencing progress. This historical perspective helps in planning appropriate interventions and tracking development over time."
    },
    {
        id: 41,
        question: "How should service providers document collaboration with other team members?",
        options: [
            "Collaboration does not need to be documented",
            "Only document formal team meetings",
            "Document joint visits, consultations, and communications about the child's needs and strategies",
            "Only document disagreements between team members"
        ],
        correctIndex: 2,
        explanation: "Service providers should document joint visits, consultations, and communications about the child's needs and strategies. This demonstrates the integrated approach to meeting the child's needs and facilitates coordination among team members."
    },
    {
        id: 42,
        question: "What is the purpose of obtaining parent consent before sharing Early Intervention records with outside entities?",
        options: [
            "It is an unnecessary administrative burden",
            "It protects the privacy and confidentiality rights of the family",
            "It is only required for sharing with medical providers",
            "It is only needed when sharing negative information"
        ],
        correctIndex: 1,
        explanation: "Obtaining parent consent before sharing records protects the privacy and confidentiality rights of the family. This requirement respects parental authority and ensures information is shared only as authorized."
    },
    {
        id: 43,
        question: "What documentation is necessary when interpretive services are used in Early Intervention?",
        options: [
            "No special documentation is needed",
            "Only the interpreter's name needs to be documented",
            "The language used, interpreter's name, and how communication was facilitated should be documented",
            "Only document if there were problems with interpretation"
        ],
        correctIndex: 2,
        explanation: "When interpretive services are used, documentation should include the language used, interpreter's name, and how communication was facilitated. This ensures accountability and clarity about how information was conveyed."
    },
    {
        id: 44,
        question: "When should a parent sign the Early Intervention records access log?",
        options: [
            "Parents never need to sign the access log",
            "Only when they request a copy of records",
            "Whenever they review their child's records",
            "Only at the initial IFSP meeting"
        ],
        correctIndex: 2,
        explanation: "Parents should sign the Early Intervention records access log whenever they review their child's records. This maintains a complete record of who has accessed the information, including the parents themselves."
    },
    {
        id: 45,
        question: "What is the purpose of documenting parent education about their rights in Early Intervention?",
        options: [
            "It is only important for legal protection of the program",
            "It is only needed when parents disagree with recommendations",
            "It demonstrates that parents have been informed of their rights and had the opportunity to ask questions",
            "It is an unnecessary administrative requirement"
        ],
        correctIndex: 2,
        explanation: "Documenting parent education about their rights demonstrates that parents have been informed of their rights and had the opportunity to ask questions. This ensures informed participation and compliance with procedural safeguards requirements."
    },
    {
        id: 46,
        question: "How should documentation address a child's progress when they are not meeting expected timelines in the IFSP?",
        options: [
            "Downplay lack of progress to avoid disappointing the family",
            "Objectively document actual progress, factors affecting rate of progress, and team discussions about potential adjustments to the plan",
            "Focus only on areas where progress is being made",
            "Blame family participation for lack of progress"
        ],
        correctIndex: 1,
        explanation: "When a child is not meeting expected timelines, documentation should objectively record actual progress, factors affecting rate of progress, and team discussions about potential adjustments to the plan. This honest approach supports appropriate service planning."
    },
    {
        id: 47,
        question: "What is a key consideration when documenting home visits that include multiple family members?",
        options: [
            "Only document interactions with the primary caregiver",
            "Include relevant information about who was present and how various family members participated",
            "Avoid mentioning family members other than parents",
            "Focus documentation exclusively on the child, not family interactions"
        ],
        correctIndex: 1,
        explanation: "When documenting home visits with multiple family members, include relevant information about who was present and how various family members participated. This recognizes the role of the entire family system in supporting the child's development."
    },
    {
        id: 48,
        question: "What should be documented regarding community-based services that supplement Early Intervention?",
        options: [
            "Outside services are not relevant to Early Intervention documentation",
            "Only services directly funded by Early Intervention should be documented",
            "Referrals made, services received, and how they complement Early Intervention services",
            "Only medical services need to be documented"
        ],
        correctIndex: 2,
        explanation: "Documentation regarding community-based services should include referrals made, services received, and how they complement Early Intervention services. This demonstrates comprehensive service coordination and supports an integrated approach to meeting child and family needs."
    },
    {
        id: 49,
        question: "What is the importance of documenting the frequency, intensity, and duration of Early Intervention services?",
        options: [
            "It is only important for billing purposes",
            "It ensures accountability and allows for evaluation of whether services are being delivered as planned",
            "It is only required for therapy services, not service coordination",
            "It is an unnecessary administrative burden"
        ],
        correctIndex: 1,
        explanation: "Documenting the frequency, intensity, and duration of services ensures accountability and allows for evaluation of whether services are being delivered as planned. This supports fidelity to the IFSP and helps in determining the effectiveness of the service plan."
    },
    {
        id: 50,
        question: "What should be included in documentation of the family assessment component of Early Intervention?",
        options: [
            "Only areas where the family needs professional support",
            "Only the family's strengths related to supporting development",
            "Family-identified resources, priorities, and concerns, conducted with family approval and using family-directed methods",
            "Professional judgment about family functioning"
        ],
        correctIndex: 2,
        explanation: "Documentation of family assessment should include family-identified resources, priorities, and concerns, conducted with family approval and using family-directed methods. This family-centered approach respects the family's role in identifying their own needs and strengths."
    }
];

// Combine all question groups
const section7Questions = [...section7QuestionsGroup1, ...section7QuestionsGroup2, ...section7QuestionsGroup3];

// Function to set up question navigation for Section 7
function setupSection7Navigation() {
    // Initialize variables
    let currentQuestionIndex = 0;
    const questionsContainer = document.getElementById('section7-questions');
    const prevButton = document.getElementById('section7-prev');
    const nextButton = document.getElementById('section7-next');
    const submitButton = document.getElementById('section7-submit');
    const progressBar = document.getElementById('section7-progress');
    
    // Array to track user's answers (initialized to null for each question)
    const userAnswers = new Array(section7Questions.length).fill(null);
    
    // Function to display current question
    function showQuestion(index) {
        // Update progress bar
        progressBar.style.width = `${((index + 1) / section7Questions.length) * 100}%`;
        
        // Get the current question
        const question = section7Questions[index];
        
        // Create HTML for the question
        let questionHTML = `
            <div class="question-container">
                <div class="question">${index + 1}. ${question.question}</div>
                <ul class="options">
        `;
        
        // Add options
        question.options.forEach((option, i) => {
            const isSelected = userAnswers[index] === i;
            questionHTML += `
                <li class="option ${isSelected ? 'selected' : ''}" data-index="${i}">${option}</li>
            `;
        });
        
        questionHTML += `
                </ul>
                <div class="feedback-message" id="feedback-${index}"></div>
                <div class="explanation" id="explanation-${index}" style="display: none;">
                    ${question.explanation}
                </div>
            </div>
        `;
        
        // Set the question HTML
        questionsContainer.innerHTML = questionHTML;
        
        // Update button states
        prevButton.disabled = index === 0;
        
        if (index === section7Questions.length - 1) {
            nextButton.style.display = 'none';
            submitButton.style.display = 'inline-block';
        } else {
            nextButton.style.display = 'inline-block';
            submitButton.style.display = 'none';
        }
        
        // Critical: Use a slight delay to ensure DOM is updated before adding listeners
        setTimeout(() => {
            // Get options after the DOM update
            const options = questionsContainer.querySelectorAll('.option');
            
            const feedbackElement = document.getElementById(`feedback-${index}`);
            const explanationElement = document.getElementById(`explanation-${index}`);
            
            // If user has already answered, show feedback
            if (userAnswers[index] !== null) {
                const isCorrect = userAnswers[index] === question.correctIndex;
                
                // Display feedback
                if (isCorrect) {
                    feedbackElement.textContent = "Correct! Great job.";
                    feedbackElement.className = "feedback-message correct";
                } else {
                    feedbackElement.textContent = "Incorrect. Please review the explanation.";
                    feedbackElement.className = "feedback-message incorrect";
                }
                
                // Show explanation
                explanationElement.style.display = 'block';
            }
            
            // Add click event listeners for each option
            options.forEach((option, optionIndex) => {
                option.onclick = function() {
                    // Remove selected class from all options
                    options.forEach(opt => opt.classList.remove('selected'));
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    
                    // Store the user's answer
                    const selectedIndex = parseInt(this.getAttribute('data-index'));
                    userAnswers[index] = selectedIndex;
                    
                    // Check if the answer is correct
                    const isCorrect = selectedIndex === question.correctIndex;
                    
                    // Display feedback
                    if (isCorrect) {
                        feedbackElement.textContent = "Correct! Great job.";
                        feedbackElement.className = "feedback-message correct";
                    } else {
                        feedbackElement.textContent = "Incorrect. Please review the explanation.";
                        feedbackElement.className = "feedback-message incorrect";
                    }
                    
                    // Show explanation
                    explanationElement.style.display = 'block';
                };
            });
        }, 50); // Small delay to ensure DOM is ready
        
        // Update current index
        currentQuestionIndex = index;
    }
    
    // Set up navigation button listeners
    nextButton.addEventListener('click', () => {
        if (currentQuestionIndex < section7Questions.length - 1) {
            showQuestion(currentQuestionIndex + 1);
        }
    });
    
    prevButton.addEventListener('click', () => {
        if (currentQuestionIndex > 0) {
            showQuestion(currentQuestionIndex - 1);
        }
    });
    
    // Set up submit button listener
    submitButton.addEventListener('click', function() {
        // Calculate score
        let score = 0;
        for (let i = 0; i < section7Questions.length; i++) {
            if (userAnswers[i] === section7Questions[i].correctIndex) {
                score++;
            }
        }
        
        // Show results
        const resultsDiv = document.getElementById('section7-results');
        resultsDiv.innerHTML = `
            <h3>Section 7 Results</h3>
            <p>You scored ${score} out of ${section7Questions.length}.</p>
            <button class="btn" id="section7-retry">Retry Section</button>
        `;
        
        resultsDiv.style.display = 'block';
        
        // Hide questions and controls
        questionsContainer.style.display = 'none';
        document.querySelector('.test-controls').style.display = 'none';
        
        // Add event listener for retry button
        document.getElementById('section7-retry').addEventListener('click', function() {
            // Reset user answers
            userAnswers.fill(null);
            currentQuestionIndex = 0;
            
            // Show questions and controls again
            questionsContainer.style.display = 'block';
            document.querySelector('.test-controls').style.display = 'flex';
            
            // Hide results
            resultsDiv.style.display = 'none';
            
            // Show first question
            showQuestion(0);
        });
    });
    
    // Show the first question to start
    showQuestion(0);
}

// Function to load Section 7 questions
function loadSection7Questions() {
    const sectionContainer = document.getElementById('section7');
    
    // Create the section structure
    let sectionContent = `
        <h3>Section 7: Documentation</h3>
        <p>This section covers documentation requirements and best practices in Early Intervention, including record-keeping, data collection, and confidentiality.</p>
        
        <div class="progress-bar">
            <div class="progress" id="section7-progress"></div>
        </div>
        
        <div id="section7-questions">
            <!-- Questions will be loaded here -->
        </div>
        
        <div class="test-controls">
            <button class="btn" id="section7-prev" disabled>Previous</button>
            <button class="btn" id="section7-next">Next</button>
            <button class="btn secondary" id="section7-submit">Submit Answer</button>
        </div>
        
        <div id="section7-results" class="results" style="display: none;">
            <!-- Results will be displayed here -->
        </div>
    `;
    
    sectionContainer.innerHTML = sectionContent;
    
    setupSection7Navigation();
}

// Make functions available globally
window.loadSection7Questions = loadSection7Questions;
window.setupSection7Navigation = setupSection7Navigation;
